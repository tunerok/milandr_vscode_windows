; generated by ARM C/C++ Compiler, 5.02 [Build 28]
; commandline ArmCC [--list --debug -c --asm --interleave -o.\Debug\Exe\mdr32f9qx_ebc.o --asm_dir=.\Debug\Lst\ --list_dir=.\Debug\Lst\ --depend=.\Debug\Exe\mdr32f9qx_ebc.d --cpu=Cortex-M3 --apcs=interwork -O0 -I..\..\..\..\Libraries\CMSIS\CM3\CoreSupport -I..\..\..\..\Libraries\CMSIS\CM3\DeviceSupport\MDR32F9Qx\inc -I..\..\..\..\Libraries\CMSIS\CM3\DeviceSupport\MDR32F9Qx\startup\arm -I..\..\..\..\Libraries\MDR32F9Qx_StdPeriph_Driver\inc -I..\..\..\..\Libraries\MDR32F9Qx_StdPeriph_Driver\inc\USB_Library -I..\..\inc -I..\..\Config -IC:\Keil\ARM\RV31\INC -IC:\Keil\ARM\CMSIS\Include -IC:\Keil\ARM\Inc\Milandr\MDR32F9x --omf_browse=.\Debug\Exe\mdr32f9qx_ebc.crf ..\..\..\..\Libraries\MDR32F9Qx_StdPeriph_Driver\src\MDR32F9Qx_ebc.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  EBC_DeInit PROC
;;;59       */
;;;60     void EBC_DeInit(void)
000000  4837              LDR      r0,|L1.224|
;;;61     {
;;;62       MDR_EBC_TypeDef *EBCx;
;;;63     
;;;64       EBCx = MDR_EBC;
;;;65     
;;;66       EBCx->CONTROL = 0;
000002  2100              MOVS     r1,#0
000004  6541              STR      r1,[r0,#0x54]
;;;67       EBCx->NAND_CYCLES = 0;
000006  6501              STR      r1,[r0,#0x50]
;;;68     
;;;69     #if defined (USE_MDR1986VE3) || defined (USE_MDR1986VE1T) || defined (USE_MDR1986VE94)
;;;70     
;;;71       EBCx->MEM_REGION[0] = 0;
;;;72       EBCx->MEM_REGION[1] = 0;
;;;73       EBCx->MEM_REGION[2] = 0;
;;;74       EBCx->MEM_REGION[3] = 0;
;;;75     
;;;76     #endif /* #if defined (USE_MDR1986VE3) || defined (USE_MDR1986VE1T) */
;;;77     }
000008  4770              BX       lr
;;;78     
                          ENDP

                  EBC_Init PROC
;;;85       */
;;;86     void EBC_Init(const EBC_InitTypeDef* EBC_InitStruct)
00000a  b530              PUSH     {r4,r5,lr}
;;;87     {
;;;88       MDR_EBC_TypeDef *EBCx;
;;;89       uint32_t tmpreg_CONTROL;
;;;90       uint32_t tmpreg_CYCLES;
;;;91     
;;;92       /* Check the parameters */
;;;93       assert_param(IS_EBC_MODE(EBC_InitStruct->EBC_Mode));
;;;94       assert_param(IS_EBC_CPOL(EBC_InitStruct->EBC_Cpol));
;;;95       assert_param(IS_EBC_WAIT_STATE(EBC_InitStruct->EBC_WaitState));
;;;96       assert_param(IS_EBC_NAND_CYCLES(EBC_InitStruct->EBC_NandTrc));
;;;97       assert_param(IS_EBC_NAND_CYCLES(EBC_InitStruct->EBC_NandTwc));
;;;98       assert_param(IS_EBC_NAND_CYCLES(EBC_InitStruct->EBC_NandTrea));
;;;99       assert_param(IS_EBC_NAND_CYCLES(EBC_InitStruct->EBC_NandTwp));
;;;100      assert_param(IS_EBC_NAND_CYCLES(EBC_InitStruct->EBC_NandTwhr));
;;;101      assert_param(IS_EBC_NAND_CYCLES(EBC_InitStruct->EBC_NandTalea));
;;;102      assert_param(IS_EBC_NAND_CYCLES(EBC_InitStruct->EBC_NandTrr));
;;;103    
;;;104      /* Form new value for the EBC_CONTROL register */
;;;105      tmpreg_CONTROL = (EBC_InitStruct->EBC_Mode)
00000c  e9d04500          LDRD     r4,r5,[r0,#0]
000010  432c              ORRS     r4,r4,r5
000012  7a05              LDRB     r5,[r0,#8]
000014  ea443205          ORR      r2,r4,r5,LSL #12
;;;106                     | (EBC_InitStruct->EBC_Cpol)
;;;107                     | (EBC_InitStruct->EBC_WaitState << EBC_CONTROL_WAIT_STATE_Pos);
;;;108    
;;;109    #if defined (USE_MDR1986VE3) || defined (USE_MDR1986VE1T) || defined (USE_MDR1986VE94)
;;;110    
;;;111      /* Using the alignment data by LSB EBC */
;;;112      tmpreg_CONTROL |= EBC_InitStruct->EBC_DataAlignment;
;;;113    
;;;114    #endif /* #if defined (USE_MDR1986VE3) || defined (USE_MDR1986VE1T) */
;;;115    
;;;116      /* Form new value for the EBC_NAND_CYCLES register */
;;;117      tmpreg_CYCLES  = (EBC_InitStruct->EBC_NandTrc       << EBC_NAND_CYCLES_TRC_Pos)
000018  7a44              LDRB     r4,[r0,#9]
00001a  7a85              LDRB     r5,[r0,#0xa]
00001c  ea441405          ORR      r4,r4,r5,LSL #4
000020  7ac5              LDRB     r5,[r0,#0xb]
000022  ea442405          ORR      r4,r4,r5,LSL #8
000026  7b05              LDRB     r5,[r0,#0xc]
000028  ea443405          ORR      r4,r4,r5,LSL #12
00002c  7b45              LDRB     r5,[r0,#0xd]
00002e  ea444405          ORR      r4,r4,r5,LSL #16
000032  7b85              LDRB     r5,[r0,#0xe]
000034  ea445405          ORR      r4,r4,r5,LSL #20
000038  7bc5              LDRB     r5,[r0,#0xf]
00003a  ea446305          ORR      r3,r4,r5,LSL #24
;;;118                     | (EBC_InitStruct->EBC_NandTwc       << EBC_NAND_CYCLES_TWC_Pos)
;;;119                     | (EBC_InitStruct->EBC_NandTrea      << EBC_NAND_CYCLES_TREA_Pos)
;;;120                     | (EBC_InitStruct->EBC_NandTwp       << EBC_NAND_CYCLES_TWP_Pos)
;;;121                     | (EBC_InitStruct->EBC_NandTwhr      << EBC_NAND_CYCLES_TWHR_Pos)
;;;122                     | (EBC_InitStruct->EBC_NandTalea 	  << EBC_NAND_CYCLES_TALEA_Pos)
;;;123                     | (EBC_InitStruct->EBC_NandTrr       << EBC_NAND_CYCLES_TRR_Pos);
;;;124    
;;;125      EBCx = MDR_EBC;
00003e  4928              LDR      r1,|L1.224|
;;;126    
;;;127      /* Configure EBC registers with new values */
;;;128      EBCx->NAND_CYCLES = tmpreg_CYCLES;
000040  650b              STR      r3,[r1,#0x50]
;;;129      EBCx->CONTROL = tmpreg_CONTROL;
000042  654a              STR      r2,[r1,#0x54]
;;;130    }
000044  bd30              POP      {r4,r5,pc}
;;;131    
                          ENDP

                  EBC_StructInit PROC
;;;137      */
;;;138    void EBC_StructInit(EBC_InitTypeDef* EBC_InitStruct)
000046  2100              MOVS     r1,#0
;;;139    {
;;;140      /* Reset EBC initialization structure parameters values */
;;;141      EBC_InitStruct->EBC_Mode          = EBC_MODE_OFF;
000048  6001              STR      r1,[r0,#0]
;;;142      EBC_InitStruct->EBC_Cpol          = EBC_CPOL_POSITIVE;
00004a  6041              STR      r1,[r0,#4]
;;;143      EBC_InitStruct->EBC_WaitState 	= EBC_WAIT_STATE_3HCLK;
00004c  7201              STRB     r1,[r0,#8]
;;;144      EBC_InitStruct->EBC_NandTrc       = EBC_NAND_CYCLES_0HCLK;
00004e  7241              STRB     r1,[r0,#9]
;;;145      EBC_InitStruct->EBC_NandTwc       = EBC_NAND_CYCLES_0HCLK;
000050  7281              STRB     r1,[r0,#0xa]
;;;146      EBC_InitStruct->EBC_NandTrea      = EBC_NAND_CYCLES_0HCLK;
000052  72c1              STRB     r1,[r0,#0xb]
;;;147      EBC_InitStruct->EBC_NandTwp       = EBC_NAND_CYCLES_0HCLK;
000054  7301              STRB     r1,[r0,#0xc]
;;;148      EBC_InitStruct->EBC_NandTwhr      = EBC_NAND_CYCLES_0HCLK;
000056  7341              STRB     r1,[r0,#0xd]
;;;149      EBC_InitStruct->EBC_NandTalea 	= EBC_NAND_CYCLES_0HCLK;
000058  7381              STRB     r1,[r0,#0xe]
;;;150      EBC_InitStruct->EBC_NandTrr       = EBC_NAND_CYCLES_0HCLK;
00005a  73c1              STRB     r1,[r0,#0xf]
;;;151    #if defined (USE_MDR1986VE3) || defined (USE_MDR1986VE1T) || defined (USE_MDR1986VE94)
;;;152      EBC_InitStruct->EBC_DataAlignment = EBC_EBC_DATA_ALIGNMENT_OFF;
;;;153      EBC_InitStruct->EBC_UseMemRegion = DISABLE;
;;;154    #endif /* #if defined (USE_MDR1986VE3) || defined (USE_MDR1986VE1T) */
;;;155    }
00005c  4770              BX       lr
;;;156    
                          ENDP

                  EBC_CalcWaitStates PROC
;;;164      */
;;;165    uint32_t EBC_CalcWaitStates(uint32_t HCLK_Frequency_KHz, uint32_t Time_ns)
00005e  b510              PUSH     {r4,lr}
;;;166    {
000060  4602              MOV      r2,r0
;;;167      uint32_t Cycles;
;;;168    
;;;169      if ( HCLK_Frequency_KHz == 0 )
000062  b90a              CBNZ     r2,|L1.104|
;;;170      {
;;;171        Cycles = 0;
000064  2000              MOVS     r0,#0
000066  e018              B        |L1.154|
                  |L1.104|
;;;172      }
;;;173      else if ( Time_ns > WAIT_STATES_MAX * WAIT_STATES_COEF / HCLK_Frequency_KHz )
000068  4b1e              LDR      r3,|L1.228|
00006a  fbb3f3f2          UDIV     r3,r3,r2
00006e  428b              CMP      r3,r1
000070  d202              BCS      |L1.120|
;;;174      {
;;;175        Cycles = 0xFFFFFFFF;
000072  f04f30ff          MOV      r0,#0xffffffff
000076  e010              B        |L1.154|
                  |L1.120|
;;;176      }
;;;177      else
;;;178      {
;;;179        Cycles = (HCLK_Frequency_KHz * Time_ns + WAIT_STATES_COEF - 1) / WAIT_STATES_COEF;
000078  4b1b              LDR      r3,|L1.232|
00007a  fb023301          MLA      r3,r2,r1,r3
00007e  1e5b              SUBS     r3,r3,#1
000080  4c19              LDR      r4,|L1.232|
000082  fbb3f0f4          UDIV     r0,r3,r4
;;;180        if ( Cycles > WAIT_STATES_MAX)
000086  2812              CMP      r0,#0x12
000088  d902              BLS      |L1.144|
;;;181        {
;;;182          Cycles = 0xFFFFFFFF;
00008a  f04f30ff          MOV      r0,#0xffffffff
00008e  e004              B        |L1.154|
                  |L1.144|
;;;183        }
;;;184        else if ( Cycles >= WAIT_STATES_MIN)
000090  2803              CMP      r0,#3
000092  d301              BCC      |L1.152|
;;;185        {
;;;186          Cycles -= WAIT_STATES_MIN;
000094  1ec0              SUBS     r0,r0,#3
000096  e000              B        |L1.154|
                  |L1.152|
;;;187        }
;;;188        else
;;;189        {
;;;190          Cycles = 0;
000098  2000              MOVS     r0,#0
                  |L1.154|
;;;191        }
;;;192      }
;;;193    
;;;194      return Cycles;
;;;195    }
00009a  bd10              POP      {r4,pc}
;;;196    
                          ENDP

                  EBC_CalcNandCycles PROC
;;;204      */
;;;205    uint32_t EBC_CalcNandCycles(uint32_t HCLK_Frequency_KHz, uint32_t Time_ns)
00009c  b510              PUSH     {r4,lr}
;;;206    {
00009e  4602              MOV      r2,r0
;;;207      uint32_t Cycles;
;;;208    
;;;209      if ( HCLK_Frequency_KHz == 0 )
0000a0  b90a              CBNZ     r2,|L1.166|
;;;210      {
;;;211        Cycles = 0;
0000a2  2000              MOVS     r0,#0
0000a4  e012              B        |L1.204|
                  |L1.166|
;;;212      }
;;;213      else if ( Time_ns > NAND_SYCLES_MAX * NAND_SYCLES_COEF / HCLK_Frequency_KHz )
0000a6  4b11              LDR      r3,|L1.236|
0000a8  fbb3f3f2          UDIV     r3,r3,r2
0000ac  428b              CMP      r3,r1
0000ae  d202              BCS      |L1.182|
;;;214      {
;;;215        Cycles = 0xFFFFFFFF;
0000b0  f04f30ff          MOV      r0,#0xffffffff
0000b4  e00a              B        |L1.204|
                  |L1.182|
;;;216      }
;;;217      else
;;;218      {
;;;219        Cycles = (HCLK_Frequency_KHz * Time_ns + NAND_SYCLES_COEF - 1) / NAND_SYCLES_COEF;
0000b6  4b0c              LDR      r3,|L1.232|
0000b8  fb023301          MLA      r3,r2,r1,r3
0000bc  1e5b              SUBS     r3,r3,#1
0000be  4c0a              LDR      r4,|L1.232|
0000c0  fbb3f0f4          UDIV     r0,r3,r4
;;;220        if ( Cycles > NAND_SYCLES_MAX)
0000c4  280f              CMP      r0,#0xf
0000c6  d901              BLS      |L1.204|
;;;221        {
;;;222          Cycles = 0xFFFFFFFF;
0000c8  f04f30ff          MOV      r0,#0xffffffff
                  |L1.204|
;;;223        }
;;;224      }
;;;225    
;;;226      return Cycles;
;;;227    }
0000cc  bd10              POP      {r4,pc}
;;;228    
                          ENDP

                  EBC_GetBusyStatus PROC
;;;233      */
;;;234    FlagStatus EBC_GetBusyStatus(void)
0000ce  4904              LDR      r1,|L1.224|
;;;235    {
;;;236      MDR_EBC_TypeDef *EBCx;
;;;237      FlagStatus tmpreg_BUSY_STS;
;;;238    
;;;239      EBCx = MDR_EBC;
;;;240    
;;;241      if ((EBCx->CONTROL & EBC_CONTROL_BUSY) == 0)
0000d0  6d4a              LDR      r2,[r1,#0x54]
0000d2  f0120f80          TST      r2,#0x80
0000d6  d101              BNE      |L1.220|
;;;242      {
;;;243        tmpreg_BUSY_STS = RESET;
0000d8  2000              MOVS     r0,#0
0000da  e000              B        |L1.222|
                  |L1.220|
;;;244      }
;;;245      else
;;;246      {
;;;247        tmpreg_BUSY_STS = SET;
0000dc  2001              MOVS     r0,#1
                  |L1.222|
;;;248      }
;;;249    
;;;250      return tmpreg_BUSY_STS;
;;;251    }
0000de  4770              BX       lr
;;;252    
                          ENDP

                  |L1.224|
                          DCD      0x400f0000
                  |L1.228|
                          DCD      0x0112a880
                  |L1.232|
                          DCD      0x000f4240
                  |L1.236|
                          DCD      0x00e4e1c0

;*** Start embedded assembler ***

#line 1 "..\\..\\..\\..\\Libraries\\MDR32F9Qx_StdPeriph_Driver\\src\\MDR32F9Qx_ebc.c"
	AREA ||.rev16_text||, CODE, READONLY
	THUMB
	EXPORT |__asm___15_MDR32F9Qx_ebc_c_9bebf752____REV16|
#line 129 "..\\..\\..\\..\\Libraries\\CMSIS\\CM3\\CoreSupport\\core_cmInstr.h"
|__asm___15_MDR32F9Qx_ebc_c_9bebf752____REV16| PROC
#line 130

 rev16 r0, r0
 bx lr
	ENDP
	AREA ||.revsh_text||, CODE, READONLY
	THUMB
	EXPORT |__asm___15_MDR32F9Qx_ebc_c_9bebf752____REVSH|
#line 144
|__asm___15_MDR32F9Qx_ebc_c_9bebf752____REVSH| PROC
#line 145

 revsh r0, r0
 bx lr
	ENDP

;*** End   embedded assembler ***
